var Focus=pc.createScript("focus");Focus.prototype.initialize=function(){this.cameraEntity=this.app.root.findByName("Camera"),this.cursor=this.app.root.findByName("Cone"),this.app.on("tap",this.moveCamera,this)},Focus.p1=new pc.Vec3,Focus.p2=new pc.Vec3,Focus.prototype.moveCamera=function(t){var i=this.cameraEntity.getPosition();this.currentLookAtPosition=this.getCurrentLookAtPosition();var o=Focus.p1;o.copy(t).sub(this.currentLookAtPosition),this.targetPosition=Focus.p2,this.targetPosition.copy(i).add(o),this.updateCursorPosition(t)},Focus.prototype.updateCursorPosition=function(t){var i=Focus.p1;i.copy(t),i.y=this.cursor.getPosition().y,this.cursor.setPosition(i)},Focus.prototype.getCurrentLookAtPosition=function(){var t=this.cameraEntity.getPosition(),i=this.app.graphicsDevice.width/2,o=this.app.graphicsDevice.height/2,s=this.cameraEntity.camera.screenToWorld(i,o,this.cameraEntity.camera.farClip),r=this.app.systems.rigidbody.raycastFirst(t,s);return r?r.point:null},Focus.prototype.update=function(t){if(this.targetPosition){var i=this.cameraEntity.getPosition();i.lerp(i,this.targetPosition,5*t),this.cameraEntity.setPosition(i)}};var Input=pc.createScript("input");Input.prototype.initialize=function(){this.cameraEntity=this.app.root.findByName("Camera"),this.app.touch&&this.app.touch.on("touchstart",this._onTouchStart,this),this.app.mouse.on("mousedown",this._onMouseDown,this),this.on("destroy",(function(){this.app.touch&&this.app.touch.off("touchstart",this._onTouchStart,this),this.app.mouse.off("mousedown",this._onMouseDown,this)}),this)},Input.prototype._onTouchStart=function(t){1==t.touches.length&&this.onTap(t.touches[0]),t.event.preventDefault()},Input.prototype._onMouseDown=function(t){this.app.mouse.disableContextMenu(),t.button===pc.MOUSEBUTTON_LEFT&&this.onTap(t)},Input.prototype.onTap=function(t){var o=this.cameraEntity.getPosition(),i=this.cameraEntity.camera.screenToWorld(t.x,t.y,this.cameraEntity.camera.farClip),n=this.app.systems.rigidbody.raycastFirst(o,i);n&&this.app.fire("tap",n.point)};